<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>SSS Assignment2 Cookie Pattern</title>
</head>
<body>

	<form id = "inputForm" name="inputForm" action="HomeServlet" method="post">
	
		<h2>Welcome to SSS..!</h2>
		<br/>
		<p>Please enter your name and email to verify the CSRF Token and cookies</p>
		<br/>
		name : <input type="text" name="name"/>
		email : <input type="text" name="email"/> <input type="submit" value="Submit"/>
		<br/>
		

	</form>


	<script type="text/javascript">


		function getCookie(cname) {
		    var name = cname + "=";
		    var ca = document.cookie.split(';');
		    for(var i = 0; i < ca.length; i++) {
		        var c = ca[i];
		        while (c.charAt(0) == ' ') {
		            c = c.substring(1);
		        }
		        if (c.indexOf(name) == 0) {
		            return c.substring(name.length, c.length);
		        }
		    }
		    return "";
		}
		
		
		function appendCookieValue() {
		    var valll = getCookie("CSRF_TOKEN");
		    if (valll != "") {
		
		    	var input = document.createElement("input");
		
		    	input.setAttribute("type", "hidden");
		
		    	input.setAttribute("name", "token");
		
		    	input.setAttribute("value", valll);
		
		    	//append to form element that you want .
		    	document.getElementById("inputForm").appendChild(input);
		    }
		}
		
		appendCookieValue();
	</script>

</body>
</html>